import{u as w,r as o,A as b,U as v,c as C,a as N,C as y,p as l,j as e,s as a,L as S,b as A,d}from"./index-B0vK3kFa.js";import{A as E}from"./auth.service-B7QOhIyC.js";const L="/assets/eye-BcCGQafr.webp",_="/assets/no-eye-CREKgqy4.webp",k=()=>{const{callEndpoint:c}=w(),{setUserAuth:u}=o.useContext(b),{setToast:m,setIsAuthenticated:h}=o.useContext(v),[t,r]=o.useState(!1),[i,p]=o.useState(!1),x=C(),s=N({initialValues:d.initialState,validationSchema:d.validatorSchemaFormLogin,validateOnMount:!1,onSubmit:async({email:g,password:f})=>{if(s.isValid){r(!0);const n=await c(E.login(g,f));if(n){const{data:j}=n.data;y.token=j.token,u(n.data),s.resetForm(),m({type:"success",title:"Existo!",message:"Login exitoso",duration:5e3}),h(!0),x(`/${l.LANDING}`)}else r(!1);r(!1)}}});return e.jsx(e.Fragment,{children:e.jsxs("div",{className:a.form_auth,children:[e.jsx("h3",{children:"ExpectIA"}),e.jsxs("form",{onSubmit:s.handleSubmit,autoComplete:"off",children:[e.jsxs("div",{className:a.form_input,children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",name:"email",id:"email",disabled:t,value:s.values.email,onChange:s.handleChange,onBlur:s.handleBlur,placeholder:"Escriba su usuario",className:s.touched.email?s.errors.email?a.error_input:a.input_valid:"",maxLength:120}),e.jsx("label",{htmlFor:"email",className:s.touched.email&&s.errors.email?a.error_label:"",children:"Usuario"})]}),e.jsx("p",{children:s.touched.email&&s.errors.email})]}),e.jsxs("div",{className:a.form_input,children:[e.jsxs("div",{children:[e.jsx("input",{type:i?"text":"password",name:"password",id:"password",autoComplete:"current-password",disabled:t,value:s.values.password,onChange:s.handleChange,onBlur:s.handleBlur,placeholder:"Escriba su contraseña",className:s.touched.password?s.errors.password?a.error_input:a.input_valid:"",maxLength:30}),e.jsx("img",{onClick:()=>p(!i),src:i?L:_,alt:"toggle show icon"}),e.jsx("label",{htmlFor:"password",className:s.touched.password&&s.errors.password?a.error_label:"",children:"Contraseña"})]}),e.jsx("p",{children:s.touched.password&&s.errors.password})]}),e.jsxs("button",{type:"submit",disabled:t||!s.dirty||!s.isValid,children:["Ingresar ",t&&e.jsx("i",{className:"fas fa-spinner fa-pulse"})]})]}),e.jsxs("div",{className:a.form_start,children:[e.jsx("p",{children:"¿No tienes una cuenta?"}),e.jsx(S,{to:`/${l.AUTH}/${A.REGISTER}`,children:"Registrate"})]})]})})};export{k as default};
